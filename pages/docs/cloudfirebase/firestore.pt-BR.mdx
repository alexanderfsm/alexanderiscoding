# Firestore

## Criar um novo documento

```js
fetch("https://examplename.vercel.app/api/firestore/create", {
  method: "POST",
  headers: {
    "Content-Type": "application/json; charset=UTF-8",
    Authorization: "e632efe_token_here_5452b",
  },
  body: JSON.stringify({
    table: {
      name: "tablename",
    },
    column: {
      columnname: "columndata",
      columnname2: "columndata2",
    },
  }),
});
```

### Parâmetros para envio

- `tablename`: Nome da tabela existente ou a ser criada
- `columnname`: Nome da coluna do documento a ser criado
- `columndata`: Dados que serão inseridos na coluna do documento a ser criado

### Parâmetros de resposta

- `200`: Retorna o código do documento criado
- `401`: Retorna a mensagem de permissão insuficiente
- `406`: Retorna a mensagem de dados insuficiente
- `500`: Retorna o erro ocorrido

## Deletar documento

```js
fetch("https://examplename.vercel.app/api/firestore/delete", {
  method: "POST",
  headers: {
    "Content-Type": "application/json; charset=UTF-8",
    Authorization: "e632efe_token_here_5452b",
  },
  body: JSON.stringify({
    table: {
      name: "tablename",
    },
    column: {
      id: "documentid",
    },
  }),
});
```

### Parâmetros para envio

- `tablename`: Nome da tabela existente
- `id`: ID do documento a ser excluido

### Parâmetros de resposta

- `200`: Retorna mensagem de documento excluido
- `401`: Retorna a mensagem de permissão insuficiente
- `406`: Retorna a mensagem de dados insuficiente

## Deletar campo do documento

```js
fetch("https://examplename.vercel.app/api/firestore/delete", {
  method: "POST",
  headers: {
    "Content-Type": "application/json; charset=UTF-8",
    Authorization: "e632efe_token_here_5452b",
  },
  body: JSON.stringify({
    table: {
      name: "tablename",
    },
    column: {
      id: "documentid",
      delete: "true",
      name: "fieldname",
    },
  }),
});
```

### Parâmetros para envio

- `tablename`: Nome da tabela existente
- `id`: ID do documento do campo
- `delete`: Obrigatório ser true
- `name`: Nome do campo a ser excluido

### Parâmetros de resposta

- `200`: Retorna mensagem de campo excluido
- `401`: Retorna a mensagem de permissão insuficiente
- `406`: Retorna a mensagem de dados insuficiente

## Deletar lista de documentos

```js
fetch("https://examplename.vercel.app/api/firestore/delete", {
  method: "POST",
  headers: {
    "Content-Type": "application/json; charset=UTF-8",
    Authorization: "e632efe_token_here_5452b",
  },
  body: JSON.stringify({
    table: {
      name: "tablename",
    },
    column: {
      where: "true",
      name: "fieldname",
      operator: "==",
      value: "fieldvalue",
    },
  }),
});
```

### Parâmetros para envio

- `tablename`: Nome da tabela existente
- `where`: Obrigatório ser true
- `name`: Nome do campo
- `operator`: Operador de comparação
- `value`: Valor do campo

### Parâmetros de resposta

- `200`: Retorna mensagem de todos os documentos excluidos
- `401`: Retorna a mensagem de permissão insuficiente
- `404`: Retorna se não achar documentos a ser excluido
- `406`: Retorna a mensagem de dados insuficiente

## Ler documento

```js
fetch("https://examplename.vercel.app/api/firestore/read", {
  method: "POST",
  headers: {
    "Content-Type": "application/json; charset=UTF-8",
    Authorization: "e632efe_token_here_5452b",
  },
  body: JSON.stringify({
    table: {
      name: "tablename",
    },
    column: {
      id: "documentid",
    },
  }),
});
```

### Parâmetros para envio

- `tablename`: Nome da tabela existente
- `id`: ID do documento

### Parâmetros de resposta

- `200`: Retorna o conteúdo do documento
- `401`: Retorna a mensagem de permissão insuficiente
- `404`: Retorna se não achar o documento
- `406`: Retorna a mensagem de dados insuficiente

## Ler lista de documento

```js
fetch("https://examplename.vercel.app/api/firestore/read", {
  method: "POST",
  headers: {
    "Content-Type": "application/json; charset=UTF-8",
    Authorization: "e632efe_token_here_5452b",
  },
  body: JSON.stringify({
    table: {
      name: "tablename",
    },
    column: {
      where: "true",
      name: "fieldname",
      operator: "==",
      value: "fieldvalue",
    },
  }),
});
```

### Parâmetros para envio

- `tablename`: Nome da tabela existente
- `where`: Obrigatório ser true
- `name`: Nome do campo
- `operator`: Operador de comparação
- `value`: Valor do campo

### Parâmetros de resposta

- `200`: Retorna o conteúdo de todos os documentos
- `401`: Retorna a mensagem de permissão insuficiente
- `404`: Retorna se não achar documentos a ser lidos
- `406`: Retorna a mensagem de dados insuficiente

## Atualizar documento

```js
fetch("https://examplename.vercel.app/api/firestore/update", {
  method: "POST",
  headers: {
    "Content-Type": "application/json; charset=UTF-8",
    Authorization: "e632efe_token_here_5452b",
  },
  body: JSON.stringify({
    table: {
      name: "YouDramaList",
      id: "uKX3jYQYSYbiMsZv9KYR",
    },
    column: {
      columnname: "columndata",
      columnname2: "columndata2",
    },
  }),
});
```

### Parâmetros para envio

- `tablename`: Nome da tabela existente
- `tableid`: Nome do documento existente
- `columnname`: Nome da coluna do documento a ser atualizado
- `columndata`: Dados que serão inseridos na coluna do documento a ser atualizado

### Parâmetros de resposta

- `200`: Retorna a mensagem de documento atualizado
- `401`: Retorna a mensagem de permissão insuficiente
- `406`: Retorna a mensagem de dados insuficiente
- `500`: Retorna o erro ocorrido

## Mesclar documento

```js
fetch("https://examplename.vercel.app/api/firestore/merge", {
  method: "POST",
  headers: {
    "Content-Type": "application/json; charset=UTF-8",
    Authorization: "e632efe_token_here_5452b",
  },
  body: JSON.stringify({
    table: {
      name: "YouDramaList",
      id: "uKX3jYQYSYbiMsZv9KYR",
    },
    column: {
      columnname: "columndata",
      columnname2: "columndata2",
    },
  }),
});
```

### Parâmetros para envio

- `tablename`: Nome da tabela existente
- `tableid`: Nome do documento existente
- `columnname`: Nome da coluna do documento a ser atualizado
- `columndata`: Dados que serão inseridos na coluna do documento a ser atualizado

### Parâmetros de resposta

- `200`: Retorna mensagem de documento mesclado
- `401`: Retorna a mensagem de permissão insuficiente
- `406`: Retorna a mensagem de dados insuficiente
- `500`: Retorna o erro ocorrido

## Páginação de documentos

É necessário os dados terem uma coluna com timestamp

Adicione no final do column ao criar um documento `timestamp: new Date().getTime()`

```js
fetch("https://examplename.vercel.app/api/firestore/pagination", {
  method: "POST",
  headers: {
    "Content-Type": "application/json; charset=UTF-8",
    Authorization: "e632efe_token_here_5452b",
  },
  body: JSON.stringify({
    table: {
      name: "CaptureLogger",
    },
    column: {
      timestamp: timestamp,
      limit: 20,
    },
  }),
});
```

### Parâmetros para envio

- `tablename`: Nome da tabela existente
- `timestamp`: Precisa ser 0, na primeira consulta, após definir com `next` retornado na consulta
- `limit`: Limite de dados retornado por consulta

### Parâmetros de resposta

- `200`: Retorna os documentos encontrado
- `401`: Retorna a mensagem de permissão insuficiente
- `404`: Retorna se não achar documentos a ser lidos
- `406`: Retorna a mensagem de dados insuficiente

## Filtrar a páginação de documentos

```js
fetch('https://examplename.vercel.app/api/firestore/pagination', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json; charset=UTF-8',
    'Authorization': 'e632efe_token_here_5452b'
  },
  body: JSON.stringify({
    table: {
      name: "CaptureLogger"
    },
    column: {
      where: "true",
      name: "fieldname",
      operator: "==",
      value: "fieldvalue"
      timestamp: timestamp,
      limit: 20
    }
  })
});
```

### Parâmetros para envio

- `tablename`: Nome da tabela existente
- `where`: Obrigatório ser true
- `name`: Nome do campo
- `operator`: Operador de comparação
- `value`: Valor do campo
- `timestamp`: Precisa ser 0, na primeira consulta, após definir com `next` retornado na consulta
- `limit`: Limite de dados retornado por consulta

### Parâmetros de resposta

- `200`: Retorna os documentos encontrado
- `401`: Retorna a mensagem de permissão insuficiente
- `404`: Retorna se não achar documentos a ser lidos
- `406`: Retorna a mensagem de dados insuficiente

## Criar documento criptografado com chave do servidor

```js
fetch("https://examplename.vercel.app/api/firestore/encrypt", {
  method: "POST",
  headers: {
    "Content-Type": "application/json; charset=UTF-8",
    Authorization: "e632efe_token_here_5452b",
  },
  body: JSON.stringify({
    table: {
      name: "tablename",
    },
    column: {
      columnname: "columndata",
      columnname2: "columndata2",
    },
  }),
});
```

### Parâmetros para envio

- `tablename`: Nome da tabela existente ou a ser criada
- `columnname`: Nome da coluna do documento a ser criado
- `columndata`: Dados que serão inseridos na coluna do documento a ser criado

### Parâmetros de resposta

- `200`: Retorna o código do documento criado
- `401`: Retorna a mensagem de permissão insuficiente
- `406`: Retorna a mensagem de dados insuficiente
- `500`: Retorna o erro ocorrido

## Ler documento criptografado com chave do servidor

```js
fetch("https://examplename.vercel.app/api/firestore/decrypt", {
  method: "POST",
  headers: {
    "Content-Type": "application/json; charset=UTF-8; charset=UTF-8",
    Authorization: "e632efe_token_here_5452b",
  },
  body: JSON.stringify({
    table: {
      name: "tablename",
    },
    column: {
      id: "documentid",
    },
  }),
});
```

### Parâmetros para envio

- `tablename`: Nome da tabela existente
- `id`: ID do documento

### Parâmetros de resposta

- `200`: Retorna o conteúdo do documento
- `401`: Retorna a mensagem de permissão insuficiente
- `404`: Retorna se não achar o documento
- `406`: Retorna a mensagem de dados insuficiente
- `500`: Retorna o erro ocorrido

## Realtime Database

## Criar um novo documento

```js
fetch("https://examplename.vercel.app/api/database/create", {
  method: "POST",
  headers: {
    "Content-Type": "application/json; charset=UTF-8",
    Authorization: "e632efe_token_here_5452b",
  },
  body: JSON.stringify({
    name: "tablename",
    id: "documentname",
    column: {
      columnname: "columndata",
      columnname2: "columndata2",
    },
  }),
});
```

### Parâmetros para envio

- `name`: Nome da tabela existente ou a ser criada
- `id`: Nome do documento a ser criado
- `columnname`: Nome da coluna do documento a ser criado
- `columndata`: Dados que serão inseridos na coluna do documento a ser criado

### Parâmetros de resposta

- `200`: Retorna a mensagem de documento criado
- `401`: Retorna a mensagem de permissão insuficiente
- `406`: Retorna a mensagem de dados insuficiente
- `500`: Retorna o erro ocorrido

## Criar um novo documento aleatório

```js
fetch("https://examplename.vercel.app/api/database/create", {
  method: "POST",
  headers: {
    "Content-Type": "application/json; charset=UTF-8",
    Authorization: "e632efe_token_here_5452b",
  },
  body: JSON.stringify({
    name: "tablename",
    random: true,
    column: {
      columnname: "columndata",
      columnname2: "columndata2",
    },
  }),
});
```

### Parâmetros para envio

- `name`: Nome da tabela existente ou a ser criada
- `random`: Obrigatório ser true
- `columnname`: Nome da coluna do documento a ser criado
- `columndata`: Dados que serão inseridos na coluna do documento a ser criado

### Parâmetros de resposta

- `200`: Retorna o código do documento criado
- `401`: Retorna a mensagem de permissão insuficiente
- `406`: Retorna a mensagem de dados insuficiente
- `500`: Retorna o erro ocorrido

## Atualizar um documento

```js
fetch("https://examplename.vercel.app/api/database/update", {
  method: "POST",
  headers: {
    "Content-Type": "application/json; charset=UTF-8",
    Authorization: "e632efe_token_here_5452b",
  },
  body: JSON.stringify({
    name: "tablename",
    id: "documentname",
    column: {
      columnname: "columndata",
      columnname2: "columndata2",
    },
  }),
});
```

### Parâmetros para envio

- `name`: Nome da tabela existente
- `id`: Nome do documento existente
- `columnname`: Nome da coluna do documento a ser atualizado
- `columndata`: Dados que serão inseridos na coluna do documento a ser atualizado

### Parâmetros de resposta

- `200`: Retorna a mensagem de documento atualizado
- `401`: Retorna a mensagem de permissão insuficiente
- `406`: Retorna a mensagem de dados insuficiente
- `500`: Retorna o erro ocorrido

## Ler documento

```js
fetch("https://examplename.vercel.app/api/database/read", {
  method: "POST",
  headers: {
    "Content-Type": "application/json; charset=UTF-8",
    Authorization: "e632efe_token_here_5452b",
  },
  body: JSON.stringify({
    id: "tablename/documentname",
  }),
});
```

### Parâmetros para envio

- `id`: Nome do documento existente com referência completa

### Parâmetros de resposta

- `200`: Retorna o conteúdo do documento
- `401`: Retorna a mensagem de permissão insuficiente
- `406`: Retorna a mensagem de dados insuficiente
- `500`: Retorna o erro ocorrido

## Ler lista de documento

```js
fetch("https://examplename.vercel.app/api/database/read", {
  method: "POST",
  headers: {
    "Content-Type": "application/json; charset=UTF-8",
    Authorization: "e632efe_token_here_5452b",
  },
  body: JSON.stringify({
    name: "tablename",
  }),
});
```

### Parâmetros para envio

- `name`: Nome da tabela existente

### Parâmetros de resposta

- `200`: Retorna o conteúdo de todos os documentos
- `401`: Retorna a mensagem de permissão insuficiente
- `406`: Retorna a mensagem de dados insuficiente
- `500`: Retorna o erro ocorrido
